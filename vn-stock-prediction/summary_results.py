# -*- coding: utf-8 -*-
"""Untitled2.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/15YEBuUwPqF8Tz_rrS34iAll1kgJy4Ttr
"""

import os
import json
import pandas as pd

def load_results_from_folder(folder_path, suffix):
    combined = {}
    for filename in os.listdir(folder_path):
        if filename.endswith(suffix):
            symbol = filename.replace(suffix, "")
            with open(os.path.join(folder_path, filename), "r", encoding="utf-8") as f:
                result = json.load(f)
            for model, metrics in result.items():
                combined[f"{symbol}_{model}"] = metrics
    return pd.DataFrame.from_dict(combined, orient='index')

if __name__ == "__main__":
    dl_path = "vn-stock-prediction/reports/dl"
    ml_path = "vn-stock-prediction/reports/ml"

    df_dl = load_results_from_folder(dl_path, "_dl.json")
    df_ml = load_results_from_folder(ml_path, "_ml.json")

    df_all = pd.concat([df_dl, df_ml])
    df_all = df_all.sort_values(by="MAPE")
    df_all.to_csv("vn-stock-prediction/reports/model_summary.csv")

    print("✅ Đã tạo bảng tổng hợp: reports/model_summary.csv")